// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Module {
  short       String @id
  name        String
  description String @db.Text
  season      Season
  fileName    String @unique

  createdAt      DateTime               @default(now())
  updatedAt      DateTime               @updatedAt
  degreePrograms DegreeProgram[]
  focuses        Focus[]
  lecturers      Lecturer[]
  reviews        Review[]
  dependencies   Module[]   @relation("ModuleDepends")
  dependencyTo   Module[]   @relation("ModuleDepends")
}

// Semesterzeit
enum Season {
  Winter
  Summer
  Both
  None
}

// Studiengang
model DegreeProgram {
  short   String                 @id
  long    String                 @unique
  modules Module[]
}

// Schwerpunkt
model Focus {
  name         String         @id
  modules      Module[]
}

// Dozent
model Lecturer {
  short    String             @id
  fullName String             @unique
  homepage String
  modules  Module[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Rezension
model Review {
  id        Int    @id @default(autoincrement())
  editToken String @unique @default(uuid())

  module      Module @relation(fields: [moduleShort], references: [short])
  moduleShort String

  text         String?
  spannend     Int?
  uebungen     Int?
  klausur      Int?
  leichtigkeit Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
